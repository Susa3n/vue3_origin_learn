{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../src/handlers.ts"],
  "sourcesContent": ["import { isObject } from '@my-vue/shared'\r\nimport { mutableHandlers, shallowMutableHandlers, readonlyHandlers, shallowReadonlyHandlers } from './handlers'\r\n\r\n\r\n// \u8BBE\u7F6E\u4E24\u4E2AweakMap\u5BF9\u8C61\uFF0C\u7528\u6765\u4FDD\u5B58\u5DF2\u7ECF\u4EE3\u7406\u8FC7\u7684\u6570\u636E\r\nconst readonlyMap = new WeakMap()\r\nconst reactiveMap = new WeakMap()\r\nfunction createReactiveObject(target, isReadonly = false, baseHandlers) {\r\n  // \u5224\u65AD\u662F\u5426\u662F\u4E2A\u5BF9\u8C61,\u5982\u679C\u4E0D\u662F\u76F4\u63A5\u8FD4\u56DE\r\n  if (!isObject(target)) {\r\n    return target\r\n  }\r\n  const baseMap = isReadonly ? readonlyMap : reactiveMap // \u5224\u65AD\u662F\u5426\u53EA\u8BFB\r\n  if (baseMap.get(target)) return baseMap.get(target) // \u6839\u636E\u7C7B\u578B\u8FDB\u884C\u67E5\u627E \u5224\u65AD\u662F\u5426\u4EE3\u7406\u8FC7\uFF0C\u5982\u679C\u662F\u76F4\u63A5\u8FD4\u56DE\r\n  // \u6CA1\u6709\u7684\u8BDD\u8FDB\u5165\u4E0B\u4E00\u6B65\r\n  const proxyTarget = new Proxy(target, baseHandlers)\r\n  baseMap.set(target, proxyTarget)\r\n  return proxyTarget\r\n}\r\n// \u666E\u901A\u54CD\u5E94\u5F0F\u5BF9\u8C61\r\nfunction reactive(target) {\r\n  return createReactiveObject(target, false, mutableHandlers)\r\n}\r\n// \u6D45\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\r\nfunction shallowReactive(target) {\r\n  return createReactiveObject(target, false, shallowMutableHandlers)\r\n\r\n}\r\n// \u53EA\u8BFB\u5BF9\u8C61\r\nfunction readonly(target) {\r\n  return createReactiveObject(target, true, readonlyHandlers)\r\n\r\n}\r\n// \u6D45\u7684\u53EA\u8BFB\u5BF9\u8C61\r\nfunction shallowReadonly(target) {\r\n  return createReactiveObject(target, true, shallowReadonlyHandlers)\r\n\r\n}\r\n\r\n\r\nexport {reactive,shallowReactive,readonly,shallowReadonly}", "// src/index.ts\r\n/**\r\n * \u5224\u65AD\u5BF9\u8C61\r\n */\r\nexport const isObject = (value) =>{\r\n \u00A0 \u00A0return typeof value === 'object' && value !== null\r\n}\r\n/**\r\n * \u5224\u65AD\u51FD\u6570\r\n */\r\nexport const isFunction= (value) =>{\r\n \u00A0 \u00A0return typeof value === 'function'\r\n}\r\n/**\r\n * \u5224\u65AD\u5B57\u7B26\u4E32\r\n */\r\nexport const isString = (value) => {\r\n \u00A0 \u00A0return typeof value === 'string'\r\n}\r\n/**\r\n * \u5224\u65AD\u6570\u5B57\r\n */\r\nexport const isNumber =(value)=>{\r\n \u00A0 \u00A0return typeof value === 'number'\r\n}\r\n/**\r\n * \u5224\u65AD\u6570\u7EC4\r\n */\r\nexport const isArray = Array.isArray\r\n", "// \u6BCF\u4E2Ahandlers\u90FD\u6709\u5BF9\u5E94\u7684get\u548Cset\uFF0C\u8FDB\u884C\u5904\u7406\r\nimport { isObject } from '@my-vue/shared'\r\nimport {reactive,readonly} from './index'\r\nfunction createHandlerGet(shallow = false,isReadonly = false) {\r\n  return function get(target,key,receiver) {\r\n    const res = Reflect.get(target,key,receiver)\r\n    if(!isReadonly) {\r\n      // \u6536\u96C6\u4F9D\u8D56...\r\n      console.log('\u6536\u96C6\u4F9D\u8D56....');\r\n    }\r\n    if(shallow) {\r\n      return res\r\n    }\r\n    if(isObject(res)) {\r\n       return isReadonly ? readonly(res) : reactive(res)\r\n    }\r\n    return res\r\n  }\r\n}\r\n\r\nfunction createHandlerSet(shallow = false) {\r\n  return function set(target,key,value,receiver) {\r\n    const res = Reflect.set(target,key,value,receiver)\r\n    return res\r\n  }\r\n}\r\n\r\nexport let mutableHandlers = {\r\n  get:createHandlerGet(),\r\n  set:createHandlerSet()\r\n}\r\n\r\nexport let shallowMutableHandlers = {\r\n  get:createHandlerGet(true),\r\n  set:createHandlerSet(true)\r\n}\r\n\r\nexport let readonlyHandlers = {\r\n  get:createHandlerGet(false,true),\r\n  set(target,key,value,receiver) {\r\n    console.warn(`set ${target} on the ${key} fail`);\r\n  }\r\n}\r\nexport let shallowReadonlyHandlers = {\r\n  get:createHandlerGet(true,true),\r\n  set(target,key,value,receiver) {\r\n    console.warn(`set ${target} on the ${key} fail`);\r\n  }\r\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACIO,MAAM,WAAW,CAAC,UAAS;AAC9B,WAAO,OAAO,UAAU,YAAY,UAAU;AAAA,EAClD;AAsBO,MAAM,UAAU,MAAM;;;ACzB7B,WAAS,iBAAiB,UAAU,OAAM,aAAa,OAAO;AAC5D,WAAO,SAAS,IAAI,QAAO,KAAI,UAAU;AACvC,YAAM,MAAM,QAAQ,IAAI,QAAO,KAAI,QAAQ;AAC3C,UAAG,CAAC,YAAY;AAEd,gBAAQ,IAAI,8BAAU;AAAA,MACxB;AACA,UAAG,SAAS;AACV,eAAO;AAAA,MACT;AACA,UAAG,SAAS,GAAG,GAAG;AACf,eAAO,aAAa,SAAS,GAAG,IAAI,SAAS,GAAG;AAAA,MACnD;AACA,aAAO;AAAA,IACT;AAAA,EACF;AAEA,WAAS,iBAAiB,UAAU,OAAO;AACzC,WAAO,SAAS,IAAI,QAAO,KAAI,OAAM,UAAU;AAC7C,YAAM,MAAM,QAAQ,IAAI,QAAO,KAAI,OAAM,QAAQ;AACjD,aAAO;AAAA,IACT;AAAA,EACF;AAEO,MAAI,kBAAkB;AAAA,IAC3B,KAAI,iBAAiB;AAAA,IACrB,KAAI,iBAAiB;AAAA,EACvB;AAEO,MAAI,yBAAyB;AAAA,IAClC,KAAI,iBAAiB,IAAI;AAAA,IACzB,KAAI,iBAAiB,IAAI;AAAA,EAC3B;AAEO,MAAI,mBAAmB;AAAA,IAC5B,KAAI,iBAAiB,OAAM,IAAI;AAAA,IAC/B,IAAI,QAAO,KAAI,OAAM,UAAU;AAC7B,cAAQ,KAAK,OAAO,iBAAiB,UAAU;AAAA,IACjD;AAAA,EACF;AACO,MAAI,0BAA0B;AAAA,IACnC,KAAI,iBAAiB,MAAK,IAAI;AAAA,IAC9B,IAAI,QAAO,KAAI,OAAM,UAAU;AAC7B,cAAQ,KAAK,OAAO,iBAAiB,UAAU;AAAA,IACjD;AAAA,EACF;;;AF3CA,MAAM,cAAc,oBAAI,QAAQ;AAChC,MAAM,cAAc,oBAAI,QAAQ;AAChC,WAAS,qBAAqB,QAAQ,aAAa,OAAO,cAAc;AAEtE,QAAI,CAAC,SAAS,MAAM,GAAG;AACrB,aAAO;AAAA,IACT;AACA,UAAM,UAAU,aAAa,cAAc;AAC3C,QAAI,QAAQ,IAAI,MAAM;AAAG,aAAO,QAAQ,IAAI,MAAM;AAElD,UAAM,cAAc,IAAI,MAAM,QAAQ,YAAY;AAClD,YAAQ,IAAI,QAAQ,WAAW;AAC/B,WAAO;AAAA,EACT;AAEA,WAAS,SAAS,QAAQ;AACxB,WAAO,qBAAqB,QAAQ,OAAO,eAAe;AAAA,EAC5D;AAEA,WAAS,gBAAgB,QAAQ;AAC/B,WAAO,qBAAqB,QAAQ,OAAO,sBAAsB;AAAA,EAEnE;AAEA,WAAS,SAAS,QAAQ;AACxB,WAAO,qBAAqB,QAAQ,MAAM,gBAAgB;AAAA,EAE5D;AAEA,WAAS,gBAAgB,QAAQ;AAC/B,WAAO,qBAAqB,QAAQ,MAAM,uBAAuB;AAAA,EAEnE;",
  "names": []
}
